#include "Testowanie.h"
#include "MierzenieCzasu.h"
#include "Tablica.h"
#include "Lista.h"
#include "Kopiec.h"
#include <iostream>
#include <fstream>



using namespace std;

void Testowanie::testowanieTablicy() {
    srand(time(NULL));
    MierzenieCzasu czas;
    Tablica tablica;
    int wybor = 10;
    int wartosc;
    int miejsce;
    string liczbyWyjscie;
    string liczbyWejscie;
    ofstream plikWyjscie;
    ifstream plikWejscie;

    while (wybor != 0) {
        cout << "Wybierz funkcję tablicy:" << endl;
        cout << "    1. Dodaj na początek" << endl;
        cout << "    2. Dodaj na koniec" << endl;
        cout << "    3. Dodaj gdzieś" << endl;
        cout << "    4. Usuń pierwszy" << endl;
        cout << "    5. Usuń ostatni" << endl;
        cout << "    6. Usuń gdzieś" << endl;
        cout << "    7. Wyszukaj element" << endl;
        cout << "    8. Wyświetl tablicę" << endl;
        cout << "    0. Wyjście" << endl << endl;
        cout << "Wybór: ";
        cin >> wybor;

        if (wybor == 0) return;												//jezeli zero, wyjdz
        cout << "Plik zawierający dane wejściowe: ";
        cin >> liczbyWejscie;
        cout << "Plik z wynikami testu: ";
        cin >> liczbyWyjscie;

        //Otwórz pliki
        plikWejscie.open("/home/igor/SDiZO-Projekt/Input/" + liczbyWejscie);
        plikWyjscie.open("/home/igor/SDiZO-Projekt/Output/Tablica/" + liczbyWyjscie, fstream::out);
        //Sprawdż czy plik jest otwarty poprawnie
        if (plikWejscie.is_open()) {
            cout << "Otwarto plik " << liczbyWejscie << endl;
        } else {
            cout << "Nie udało się otworzyć pliku wejściowego!" << endl;
            return;
        }

        if (plikWyjscie.is_open()) {
            cout << "Otwarto plik " << liczbyWyjscie << endl;
        } else {
            cout << "Nie udało się otworzyć pliku wyjściowego!" << endl;
            return;
        }

        switch (wybor) {
            default:
                cout << "Błędny wybór!" << endl;
                break;

            case 0:
                return;

            case 1:
                cout << "Rozpoczynam test automatyczny...";

                while (plikWejscie.good()) {
                    //Wczytaj wartość z pliku
                    plikWejscie >> wartosc;
                    //Wykonaj funkcję z pomiarem
                    czas.czasStart();
                    tablica.dodajNaPoczatek(wartosc);
                    czas.czasStop();
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 2:
                cout << "Rozpoczynam test automatyczny...";

                while (plikWejscie.good()) {
                    //Wczytaj wartość z pliku
                    plikWejscie >> wartosc;
                    //Wykonaj funkcję z pomiarem
                    czas.czasStart();
                    tablica.dodajNaKoniec(wartosc);
                    czas.czasStop();
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 3:
                cout << "Rozpoczynam test automatyczny...";

                while (plikWejscie.good()) {
                    //Wczytaj wartość z pliku
                    plikWejscie >> wartosc;
                    //Wykonaj funkcję z pomiarem
                    czas.czasStart();
                    tablica.dodajGdziekolwiek(wartosc, rand() % tablica.rozmiarTablicy);
                    czas.czasStop();
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 4:
                cout << "Rozpoczynam test automatyczny...";

                //Wypełnij tablicę wartościami
                while (plikWejscie.good()) {
                    plikWejscie >> wartosc;
                    tablica.dodajNaPoczatek(wartosc);
                }
                while (tablica.rozmiarTablicy != 0) {
                    //Wykonaj funkcję z pomiarem
                    czas.czasStart();
                    tablica.usunPierwszy();
                    czas.czasStop();
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 5:
                //Wypełnij tablicę wartościami
                while (plikWejscie.good()) {
                    plikWejscie >> wartosc;
                    tablica.dodajNaPoczatek(wartosc);
                }
                while (tablica.rozmiarTablicy != 0) {
                    //Wykonaj funkcję z pomiarem
                    czas.czasStart();
                    tablica.usunOstatni();
                    czas.czasStop();
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 6:
                //Wypełnij tablicę wartościami
                while (plikWejscie.good()) {
                    plikWejscie >> wartosc;
                    tablica.dodajNaPoczatek(wartosc);
                }
                while (tablica.rozmiarTablicy != 0) {
                    //Wykonaj funkcję z pomiarem
                    czas.czasStart();
                    tablica.usunKtorys(rand() % tablica.rozmiarTablicy);
                    czas.czasStop();
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 7:
                //Wypełnij tablicę wartościami
                while (plikWejscie.good()) {
                    plikWejscie >> wartosc;
                    tablica.dodajNaPoczatek(wartosc);
                }

                for (int i = 0; i < tablica.rozmiarTablicy; i++) {
                    //Wykonaj funkcję z pomiarem
                    czas.czasStart();
                    tablica.sprawdzCzyIstnieje(rand() % 2000000 - 1000000);
                    czas.czasStop();
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 8:
                czas.czasStart();
                tablica.wydrukujTablice();
                czas.czasStop();
                cout << "Czas wykonania: " << czas.czasWykonania() << "ms" << endl;
                break;
        }

    }
}

void Testowanie::testowanieListy() {
    srand(time(NULL));
    Czas czas;
    Lista lista;
    int wybor = 99;
    int wartosc;
    int miejsce;
    string liczbyWyjscie;
    string liczbyWejscie;
    ofstream plikWyjscie;
    ifstream plikWejscie;


    while (wybor != 0) {
        cout << "Wybierz funkcję listy:" << endl;
        cout << "    1. Dodaj na początek" << endl;
        cout << "    2. Dodaj na koniec" << endl;
        cout << "    3. Dodaj gdziekolwiek" << endl;
        cout << "    4. Usuń pierwszy" << endl;
        cout << "    5. Usuń ostatni" << endl;
        cout << "    6. Usuń którykolwiek" << endl;
        cout << "    7. Wyszukaj element" << endl;
        cout << "    8. Wydrukuj listę" << endl;
        cout << "    0. Wyjście" << endl << endl;
        cout << "Wybór: ";
        cin >> wybor;

        //Zamknij, jeżeli wybrano 0
        if (wybor == 0) return;

        cout << "Plik zawierający dane wejściowe: ";
        cin >> liczbyWejscie;
        cout << "Plik z wynikami testu: ";
        cin >> liczbyWyjscie;


        //Otwórz pliki
        plikWejscie.open("/home/igor/SDiZO-Projekt/Input/" + liczbyWejscie);
        plikWyjscie.open("/home/igor/SDiZO-Projekt/Output/Lista/" + liczbyWyjscie, fstream::out);
        //Sprawdż czy plik jest otwarty poprawnie
        if (plikWejscie.is_open()) {
            cout << "Otwarto plik " << liczbyWejscie << endl;
        } else {
            cout << "Nie udało się otworzyć pliku wejściowego!" << endl;
            return;
        }

        if (plikWyjscie.is_open()) {
            cout << "Otwarto plik " << liczbyWyjscie << endl;
        } else {
            cout << "Nie udało się otworzyć pliku wyjściowego!" << endl;
            return;
        }

        switch (wybor) {
            default:
                cout << "Błędny wybór!" << endl;
                break;

            case 0:
                break;

            case 1:
                while (plikWejscie.good()) {
                    //Wczytaj wartość z pliku
                    plikWejscie >> wartosc;
                    //Wykonaj funkcję z pomiarem
                    czas.czasStart();
                    lista.dodajNaPoczatek(wartosc);
                    czas.czasStop();
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 2:
                while (plikWejscie.good()) {
                    //Wczytaj wartość z pliku
                    plikWejscie >> wartosc;
                    //Wykonaj funkcję z pomiarem
                    czas.czasStart();
                    lista.dodajNaKoniec(wartosc);
                    czas.czasStop();
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 3:
                while (plikWejscie.good()) {
                    //Wczytaj wartość z pliku
                    plikWejscie >> wartosc;

                    if (lista.rozmiar == 0) {
                        czas.czasStart();
                        lista.dodajGdziekolwiek(wartosc, 0);
                        czas.czasStop();
                    } else {
                        czas.czasStart();
                        lista.dodajGdziekolwiek(wartosc, 1);
                        czas.czasStop();
                    }
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 4:
                //Wypełnij tablicę wartościami
                while (plikWejscie.good()) {
                    plikWejscie >> wartosc;
                    lista.dodajNaPoczatek(wartosc);
                }
                while (lista.rozmiar != 0) {
                    //Wykonaj funkcję z pomiarem
                    czas.czasStart();
                    lista.usunPierwszy();
                    czas.czasStop();
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 5:
                //Wypełnij tablicę wartościami
                while (plikWejscie.good()) {
                    plikWejscie >> wartosc;
                    lista.dodajNaPoczatek(wartosc);
                }
                while (lista.rozmiar != 0) {
                    //Wykonaj funkcję z pomiarem
                    czas.czasStart();
                    lista.usunOstatni();
                    czas.czasStop();
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 6:
                //Wypełnij tablicę wartościami
                while (plikWejscie.good()) {
                    plikWejscie >> wartosc;
                    lista.dodajNaPoczatek(wartosc);
                }
                while (lista.rozmiar != 0) {
                    //Wykonaj funkcję z pomiarem
                    czas.czasStart();
                    lista.usunKtorys(rand() % lista.rozmiar);
                    czas.czasStop();
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 7:
                //Wypełnij tablicę wartościami
                while (plikWejscie.good()) {
                    plikWejscie >> wartosc;
                    lista.dodajNaPoczatek(wartosc);
                }

                for (int i = 0; i < lista.rozmiar; i++) {
                    //Wykonaj funkcję z pomiarem
                    czas.czasStart();
                    lista.sprawdzCzyIstnieje(rand() % 2000000 - 1000000);
                    czas.czasStop();
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 8:
                czas.czasStart();
                lista.wydrukujListe();
                czas.czasStop();
                cout << "Czas wykonania: " << czas.czasWykonania() << "ms" << endl;
                break;

        }

    }
}

void Testowanie::testowanieKopca() {
    srand(time(NULL));
    Czas czas;
    Kopiec kopiec;
    int wybor = 99;
    int wartosc;
    string liczbyWyjscie;
    string liczbyWejscie;
    ofstream plikWyjscie;
    ifstream plikWejscie;

    while (wybor != 0) {
        cout << "Wybierz funkcję Kopca:" << endl;
        cout << "    1. Dodaj" << endl;
        cout << "    2. Usuń" << endl;
        cout << "    3. Wyszukaj" << endl;
        cout << "    4. Wydrukuj kopiec" << endl;
        cout << "    0. Wyjście" << endl << endl;
        cout << "Wybór: ";
        cin >> wybor;

        //Zamknij, jeżeli wybrano 0
        if (wybor == 0) return;

        cout << "Plik zawierający dane wejściowe: ";
        cin >> liczbyWejscie;
        cout << "Plik z wynikami testu: ";
        cin >> liczbyWyjscie;


        //Otwórz pliki
        plikWejscie.open("/home/igor/SDiZO-Projekt/Input/" + liczbyWejscie);
        plikWyjscie.open("/home/igor/SDiZO-Projekt/Output/Kopiec/" + liczbyWyjscie, fstream::out);
        //Sprawdż czy plik jest otwarty poprawnie
        if (plikWejscie.is_open()) {
            cout << "Otwarto plik " << liczbyWejscie << endl;
        } else {
            cout << "Nie udało się otworzyć pliku wejściowego!" << endl;
            return;
        }

        if (plikWyjscie.is_open()) {
            cout << "Otwarto plik " << liczbyWyjscie << endl;
        } else {
            cout << "Nie udało się otworzyć pliku wyjściowego!" << endl;
            return;
        }

        switch (wybor) {
            default:
                cout << "Błędny wybór!" << endl;
                break;

            case 0:
                break;

            case 1:
                while (plikWejscie.good()) {
                    //Wczytaj wartość z pliku
                    plikWejscie >> wartosc;
                    //Wykonaj funkcję z pomiarem
                    czas.czasStart();
                    kopiec.dodaj(wartosc);
                    czas.czasStop();
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 2:


                while (plikWejscie.good()) {
                    plikWejscie >> wartosc;
                    //Wykonaj funkcję z pomiarem
                    czas.czasStart();
                    kopiec.usun(wartosc);
                    czas.czasStop();
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 3:
                //Wypełnij tablicę wartościami
                while (plikWejscie.good()) {
                    plikWejscie >> wartosc;
                    kopiec.dodaj(wartosc);
                }

                for (int i = 0; i < kopiec.rozmiar; i++) {
                    //Wykonaj funkcję z pomiarem
                    czas.czasStart();
                    kopiec.sprawdzCzyIstnieje(rand() % 2000000 - 1000000);
                    czas.czasStop();
                    //Zapisz do pliku wynik pomiaru
                    plikWyjscie << czas.czasWykonania() << endl;
                }

                //Zamknij oba pliki
                plikWejscie.close();
                plikWyjscie.close();
                break;

            case 4:
                czas.czasStart();
                kopiec.wydrukujKopiec();
                czas.czasStop();
                cout << "Czas wykonania: " << czas.czasWykonania() << "ms" << endl;
                break;
        }

    }
}
